<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox prefHeight="400.0" prefWidth="750.0" spacing="10.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.cadastromuseu.Acervo.controller.GestaoLocalizacaoController">
    <padding>
        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
    </padding>

    <Label text="Gerenciamento de Localizações">
        <font>
            <Font name="System Bold" size="18.0" />
        </font>
    </Label>
    <Label text="Cadastre as coordenadas físicas (Sala, Estante, Prateleira) onde os itens estão guardados." />

    <!-- HBox de Cadastro -->
    <HBox spacing="10.0" alignment="CENTER_LEFT">
        <Label text="Sala:" />
        <TextField fx:id="txtSala" prefWidth="150.0" promptText="Ex: RT-01" />

        <Label text="Estante:" />
        <TextField fx:id="txtEstante" prefWidth="100.0" promptText="Ex: E-12" />

        <Label text="Prateleira:" />
        <TextField fx:id="txtPrateleira" prefWidth="100.0" promptText="Ex: P-03" />

        <Button onAction="#handleAdicionarLocalizacao" text="Adicionar" style="-fx-background-color: #28a745; -fx-text-fill: white;" />
    </HBox>

    <!-- HBox de Filtro/Busca (CRÍTICO: Contém fx:id="txtFiltro") -->
    <HBox spacing="10.0" alignment="CENTER_LEFT">
        <Label text="Buscar:" style="-fx-font-weight: bold;"/>
        <TextField fx:id="txtFiltro" prefWidth="300.0" promptText="Digite sala, estante ou prateleira para filtrar..." />
    </HBox>

    <TableView fx:id="tvLocalizacoes" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colID" maxWidth="50.0" minWidth="50.0" prefWidth="50.0" text="ID" />
            <TableColumn fx:id="colSala" prefWidth="200.0" text="Sala" />
            <TableColumn fx:id="colEstante" prefWidth="150.0" text="Estante" />
            <TableColumn fx:id="colPrateleira" prefWidth="150.0" text="Prateleira" />
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
    </TableView>

    <!-- HBox de Ações -->
    <HBox alignment="CENTER_RIGHT" spacing="10.0">
        <Button onAction="#handleRemoverLocalizacao" text="Remover Selecionada" style="-fx-background-color: #dc3545; -fx-text-fill: white;" />
        <Button onAction="#handleFechar" text="Fechar" />
    </HBox>
</VBox>